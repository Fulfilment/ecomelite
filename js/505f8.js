"use strict";var extendStatics=function(t,e){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},extendStatics(t,e)};function __extends(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var __assign=function(){return __assign=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},__assign.apply(this,arguments)},reactive=function(t,e){void 0===e&&(e=300);var i=[],n=t(),o=setInterval((function(){if(0!==i.length){var e=t();if(n!==e&&("object"!=typeof n||JSON.stringify(n)!==JSON.stringify(e))){n=e;for(var o=0,s=i;o<s.length;o++)(0,s[o])(e)}}}),e);return{get val(){return n},on_change:function(t){t(n),i.push(t)},clear:function(){clearInterval(o)}}},StaticOffsets=function(){function t(t,e,i,n){void 0===t&&(t=null),void 0===e&&(e=function(){return Math.round(scrollY+(o.el?o.el.getBoundingClientRect().top:0))}),void 0===i&&(i=function(){return!1}),void 0===n&&(n=function(){return null});var o=this;this.el=t,this.get_root_offset=e,this.need_to_calc_offset=i,this.get_prev_sibling=n,this.user_margins={},this.root=0,this.top=0,this.get_top_offset=function(){return o.get_sibilings_offset(o.get_prev_sibling,o.get_prev_sibling(o.el),o.user_margins.margin_top)}}return t.prototype.init=function(t){var e=this;this.user_margins=t,this.top_watcher=reactive(this.get_top_offset),this.top_watcher.on_change((function(t){e.top=t})),this.root_watcher=reactive(this.get_root_offset),this.root_watcher.on_change((function(t){e.root=t}))},t.prototype.clear=function(){this.top_watcher&&this.top_watcher.clear(),this.root_watcher&&this.root_watcher.clear()},t.prototype.update=function(){},t.prototype.get_sibilings_offset=function(t,e,i){if(void 0===i&&(i=0),!e)return i;if(!this.need_to_calc_offset(e))return this.get_sibilings_offset(t,t(e),i);var n=getComputedStyle(e),o=n.marginTop,s=n.marginBottom;return this.get_sibilings_offset(t,t(e),i+e.getBoundingClientRect().height+parseInt(o||"0")+parseInt(s||"0"))},t}(),DynamicOffsets=function(t){function e(e,i,n,o,s){void 0===e&&(e=null),void 0===n&&(n=function(){return!1}),void 0===o&&(o=function(){return null}),void 0===s&&(s=function(){return null});var r=t.call(this,e,i,n,o)||this;return r.get_next_sibling=s,r.bottom=0,r.max_top_offset=0,r.relative_top=0,r.height=0,r.position={top:0,bottom:0},r.border_box=0,r.get_height=function(){return r.el?Math.round(Math.max(r.el.clientHeight,r.el.getBoundingClientRect().height)):0},r.get_bottom_offset=function(){return r.get_sibilings_offset(r.get_next_sibling,r.get_next_sibling(r.el),r.user_margins.margin_bottom)},r}return __extends(e,t),e.prototype.init=function(e){var i=this;t.prototype.init.call(this,e),this.height_watcher=reactive(this.get_height),this.height_watcher.on_change((function(t){i.height=t,i.border_box=i.get_border_box(),i.relative_top=i.get_relative_top()})),this.bottom_offset=reactive(this.get_bottom_offset),this.bottom_offset.on_change((function(t){i.bottom=t,i.relative_top=i.get_relative_top()}))},e.prototype.clear=function(){t.prototype.clear.call(this),this.height_watcher&&this.height_watcher.clear(),this.bottom_offset&&this.bottom_offset.clear()},e.prototype.update=function(){this.position=this.get_position()},e.prototype.set_max_offset=function(t){this.max_top_offset=t,this.relative_top=this.get_relative_top()},e.prototype.get_position=function(){return this.el&&this.el.parentElement?{top:this.el.offsetTop,bottom:this.el.parentElement.clientHeight-this.el.offsetTop-this.border_box}:{top:0,bottom:0}},e.prototype.get_border_box=function(){if(!this.el)return 0;var t=getComputedStyle(this.el),e=t.marginTop,i=t.marginBottom;return this.height+parseInt(e)+parseInt(i)},e.prototype.get_relative_top=function(){return this.max_top_offset-this.border_box-this.bottom},e}(StaticOffsets),StopWidgetClassName="FixedWidget__stop_widget",FixedWidgetClassName="FixedWidget__fixed_widget",BaseWidget=function(){function t(t){var e=this;this.el=t,this.get_root_offset=function(){return Math.round(scrollY+(e.el?e.el.getBoundingClientRect().top:0))},this.need_to_calc_el_offset=function(t){return!1},this.offsets=new StaticOffsets(this.el,this.get_root_offset)}return t.prototype.mount=function(t){void 0===t&&(t={}),this.offsets.init(t)},t.prototype.render=function(t){this.offsets.update()},t.prototype.unmount=function(){this.offsets.clear()},t.prototype.getElement=function(){return this.el},t.prototype.toString=function(){var t;return"".concat(null===(t=this.el)||void 0===t?void 0:t.innerHTML)},t.queryAllWidgetsContainers=function(t){return[].concat(Array.from(document.querySelectorAll(".".concat(t))),Array.from(document.querySelectorAll("[data-fixed_widget=".concat(t)))).map((function(e){e.classList.remove(t),e.removeAttribute("data-fixed_widget");var i=getWidgetContainer(e);return i.classList.remove(FixedWidgetClassName),i.classList.remove(StopWidgetClassName),i}))},t.from=function(t,e){var i=this,n=[];try{n=Array.from(t.querySelectorAll(":scope > .".concat(e)))}catch(i){n=Array.from(t.children).filter((function(t){return t.classList.contains(e)}))}return n.filter((function(t){return null!==t})).map((function(t){return new i(t)}))},t}(),getWidgetContainer=function(t){if(!t.parentElement)return t;var e=t.parentElement.classList.toString();return e.includes("sidebar")?t:e.includes("wp-block-group")||e.includes("wp-block-column")||t.parentElement.classList.contains("widget")?getWidgetContainer(t.parentElement):t},compatabilty_FW_v5=function(t){return void 0===t&&(t=[]),t.some((function(t){return!/^[a-z]/i.test(t)}))?t:t.concat(t.map((function(t){return"#".concat(t)})))},queryElements=function(t){return void 0===t&&(t=[]),Array.from(t.map((function(t){return Array.from(document.querySelectorAll(t))}))).reduce((function(t,e){return t.concat(e)}),[]).filter((function(t){return t instanceof HTMLElement}))};function findWithProperty(t,e){return t&&t!==document.body?e(getComputedStyle(t))?t:findWithProperty(t.parentElement,e):null}var PositionWidget=function(t){function e(e){var i=t.call(this,e)||this;return i.is_pinned=!1,i.init_rect={height:0,width:0},i.init_style={position:"static",marginBottom:"",transition:"",transform:"",marginTop:"",padding:"",width:"",top:""},i.get_prev_sibling=function(t){return t&&!t.classList.contains(StopWidgetClassName)&&t.previousElementSibling||null},i.get_next_sibling=function(t){return t&&!t.classList.contains(StopWidgetClassName)?t.nextElementSibling:null},i.need_to_calc_el_offset=function(t){return t.classList.contains(FixedWidgetClassName)},i.offsets=new DynamicOffsets(i.el,i.get_root_offset,i.need_to_calc_el_offset,i.get_prev_sibling,i.get_next_sibling),i}return __extends(e,t),e.prototype.mount=function(e){var i=this;t.prototype.mount.call(this,e),this.el&&this.el.parentElement&&(this.store_style(getComputedStyle(this.el)),this.store_rect(this.el),this.height_watcher=reactive((function(){return i.el?i.el.getBoundingClientRect().height:0})))},e.prototype.unmount=function(){var e;t.prototype.unmount.call(this),this.unpin(),null===(e=this.height_watcher)||void 0===e||e.clear(),this.reset_style(),this.reset_rect()},e.prototype.reset_style=function(){if(this.el){for(var t in this.init_style)this.el.style[t]="";this.init_style={position:"static",marginBottom:"",transition:"",transform:"",marginTop:"",padding:"",width:"",top:""}}},e.prototype.reset_rect=function(){if(this.el){for(var t in this.init_rect)this.el.style[t]="";this.init_rect={height:0,width:0}}},e.prototype.render=function(e){t.prototype.render.call(this,e),this.on_scroll(Math.round(scrollY),e)},e.from=function(e){return t.from.call(this,e,FixedWidgetClassName)},e.prototype.on_scroll=function(t,e){throw new Error("Method is not overridden!")},e.prototype.pin=function(){!this.is_pinned&&this.el&&(this.is_pinned=!0,this.el.classList.add("FixedWidget__fixed_widget__pinned"))},e.prototype.unpin=function(){this.is_pinned&&this.el&&(this.is_pinned=!1,this.el.classList.remove("FixedWidget__fixed_widget__pinned"))},e.prototype.store_style=function(t){for(var e in this.init_style)this.init_style[e]=t[e];"relative"===this.init_style.position&&(this.init_style.position="static")},e.prototype.set_style=function(t){var e=this;Object.entries(t).forEach((function(t){var i=t[0],n=t[1];e.el&&(e.el.style[i]=n)}))},e.prototype.store_rect=function(t){if(t){var e=t.getBoundingClientRect(),i=getComputedStyle(t);"content-box"==i.boxSizing&&(e.height=e.height-parseInt(i.paddingTop,10)-parseInt(i.paddingBottom,10)-parseInt(i.borderTopWidth,10)-parseInt(i.borderBottomWidth,10),e.width=e.width-parseInt(i.paddingLeft,10)-parseInt(i.paddingRight,10)-parseInt(i.borderLeftWidth,10)-parseInt(i.borderRightWidth,10));var n={height:e.height,width:e.width};for(var o in this.init_rect)this.init_rect[o]=n[o]}},e.prototype.restore_style=function(){if(this.el)for(var t in this.init_style)this.el.style[t]=this.init_style[t]},e.prototype.restore_rect=function(){if(this.el)for(var t in this.init_rect)this.el.style[t]="".concat(this.init_rect[t],"px")},e}(BaseWidget),FixedWidget=function(t){function e(e){var i=t.call(this,e)||this;return i.get_root_offset=function(){if(!i.el)return Number.MAX_VALUE;var t=i.el.getBoundingClientRect().top,e=Math.round(scrollY+t);return 0==scrollY?e:(i.is_pinned?Math.min:Math.max)(i.offsets.root,e)},i.need_to_calc_el_offset=function(t){return t.classList.contains(FixedWidgetClassName)&&t!==i.el},i.el&&i.el.parentElement?(i.el.classList.add(FixedWidgetClassName),i):i}return __extends(e,t),e.prototype.mount=function(e){var i=this;t.prototype.mount.call(this,e),this.el&&(this.clone(),this.offsets.clear(),this.offsets=new DynamicOffsets(this.clone_el,this.get_root_offset,this.need_to_calc_el_offset,this.get_prev_sibling,this.get_next_sibling),this.offsets.init(e),this.height_watcher&&this.height_watcher.on_change((function(){i.store_rect(i.el),i.clone_el&&i.el&&(i.clone_el.style.height="".concat(i.init_rect.height,"px"))})))},e.prototype.unmount=function(){var e;t.prototype.unmount.call(this),null===(e=this.clone_el)||void 0===e||e.remove(),this.clone_el=void 0},e.prototype.set_max_offset=function(t){var e=this,i=t.find((function(t){return 0!==t&&t>e.offsets.root}));i&&this.offsets.set_max_offset(i)},e.prototype.on_scroll=function(t){if(this.el){var e=t>0&&t>this.offsets.root-this.offsets.top,i=0!==this.offsets.max_top_offset&&t>this.offsets.relative_top-this.offsets.top?this.offsets.relative_top-t:this.offsets.top;e?this.fix(i):this.is_pinned&&(this.unpin(),this.restore_style(),this.clone_el&&(this.clone_el.style.display="none"))}},e.prototype.clone=function(){var t=this;if(this.el&&this.el.parentElement&&!this.clone_el){for(var e in this.clone_el=this.el.cloneNode(!1),this.clone_el.getAttributeNames().forEach((function(e){t.clone_el.removeAttribute(e)})),this.init_style)this.clone_el.style[e]=this.init_style[e];this.clone_el.style.display="none",this.el.parentElement.insertBefore(this.clone_el,this.el)}},e.prototype.fix=function(t){this.el&&(this.is_pinned?this.el.style.top="".concat(t,"px"):(this.pin(),this.restore_style(),this.restore_rect(),this.set_style({top:"".concat(t,"px"),position:"fixed"}),this.clone_el&&(this.clone_el.style.display="block")))},e.new=function(t){return new e(document.querySelector(t))},e.is=function(t){var e=document.querySelector(t);return!!e&&e.classList.contains(FixedWidgetClassName)},e}(PositionWidget),StickyWidget=function(t){function e(e){var i=t.call(this,e)||this;return i.borderBox=0,i.margins=0,i.el&&i.el.parentElement?(i.el.classList.add(FixedWidgetClassName),i):i}return __extends(e,t),e.prototype.mount=function(e){t.prototype.mount.call(this,e),this.el&&(this.el.style.position="sticky",this.el.style.position="-webkit-sticky",this.el.style.transition=/all|transform/.test(this.init_style.transition)?this.init_style.transition:"transform 0s",this.el.style.boxSizing="border-box")},e.prototype.set_max_offset=function(t){var e=this;if(this.el&&this.el.parentElement){var i=t.find((function(t){return e.el&&t>e.el.offsetTop}));i&&this.offsets.set_max_offset(i)}},e.prototype.on_scroll=function(t,e){if(this.el&&this.el.parentElement){this.offsets.position.top>this.offsets.top?this.pin():this.unpin();var i=this.offsets.position.bottom,n=this.offsets.max_top_offset?Math.min(this.offsets.max_top_offset-(this.el.parentElement.clientHeight-i),i):this.offsets.bottom;this.el.style.top="".concat(this.offsets.top,"px"),n>=this.offsets.bottom?this.el.style.transform="translateY(0px)":this.el.style.transform="translateY(".concat(n-this.offsets.bottom,"px)")}},e.new=function(t){return new e(document.querySelector(t))},e.is=function(t){var e=document.querySelector(t);return!!e&&e.classList.contains(FixedWidgetClassName)},e}(PositionWidget),StopWidget=function(t){function e(e){var i=t.call(this,e)||this;return i.need_to_calc_el_offset=function(){return!0},i.el&&i.el.parentElement?(i.el.classList.add(StopWidgetClassName),i):i}return __extends(e,t),e.new=function(t){return new e(document.querySelector(t))},e.is=function(t){var e=document.querySelector(t);return!!e&&e.classList.contains(StopWidgetClassName)},e.from=function(e){return t.from.call(this,e,StopWidgetClassName)},e}(BaseWidget),Sidebar=function(){function t(t,e,i){void 0===i&&(i=!1);var n=this;this.el=t,this.margins=e,this.widgets=[],this.stop_widgets=[],this.isSticky=!1,this.setWidgetsMaxOffset=function(t){for(var e=0,i=n.widgets;e<i.length;e++)i[e].set_max_offset(t);n.render()},this.logWidgetRenderError=function(){console.log("Fixed Widget: fallback to position sticky")},this.onWidgetRenderError=function(t){if(n.logWidgetRenderError(),t instanceof StickyWidget){t.unmount();var e=n.widgets.findIndex((function(e){return t===e})),i=new FixedWidget(t.getElement());i.mount(n.margins),i.render(n.logWidgetRenderError),n.widgets[e]=i}};var o=!!findWithProperty(this.el,(function(t){return"none"!==t.float})),s=!!findWithProperty(this.el,(function(t){return"hidden"===t.overflow}));(o||s)&&i&&console.log("Fixed Widget: fallback to position sticky"),this.isSticky=!o&&!s&&i;var r=this.isSticky?StickyWidget:FixedWidget;this.stop_widgets=StopWidget.from(this.el),this.widgets=r.from(this.el),this.offsets=new DynamicOffsets(this.el),this.isSticky&&(this.el.style.position="relative",0===this.stop_widgets.length&&(this.el.style.minHeight="100%"))}return t.prototype.mount=function(){var t=this;this.offsets.clear(),this.max_offset_watcher&&this.max_offset_watcher.clear(),this.offsets.init(this.margins),this.stop_widgets.forEach((function(t){t.mount()})),this.widgets.forEach((function(e){e.mount(t.margins)})),this.widgets=this.widgets.sort((function(t,e){return t.offsets.root-e.offsets.root}))},t.prototype.set_max_offset=function(t){var e=0!=this.stop_widgets.length,i=this.isSticky&&e,n=e?this.stop_widgets:t;this.max_offset_watcher=reactive((function(){return 0===n.length?[Math.round(document.body.scrollHeight)]:n.map((function(t){return Math.round(i?t.offsets.top:t.offsets.root)})).sort()})),this.max_offset_watcher.on_change(this.setWidgetsMaxOffset)},t.prototype.render=function(){for(var t=0,e=this.stop_widgets;t<e.length;t++)e[t].render(this.logWidgetRenderError);for(var i=0,n=this.widgets;i<n.length;i++)n[i].render(this.onWidgetRenderError)},t.prototype.unmount=function(){for(var t=0,e=this.stop_widgets;t<e.length;t++)e[t].unmount();for(var i=0,n=this.widgets;i<n.length;i++)n[i].unmount()},t}(),Sidebars=function(){function t(t,e){var i=this;this.data=[],this.render=function(){for(var t=0,e=i.data;t<e.length;t++)e[t].render()},this.data=Array.from(new Set(t.map((function(t){return t.parentElement})))).filter((function(t){return null!==t})).map((function(t){return new Sidebar(t,{margin_bottom:e.margin_bottom,margin_top:e.margin_top},e.use_sticky_position)}))}return t.prototype.mount=function(){this.data.forEach((function(t){t.mount()})),this.set_max_offset()},t.prototype.unmonut=function(){this.data.forEach((function(t){t.unmount()}))},t.prototype.set_max_offset=function(){for(var t=this.getGeneralStopElements(),e=0,i=this.data;e<i.length;e++)i[e].set_max_offset(t)},t.prototype.getGeneralStopElements=function(){return this.data.filter((function(t){return!t.isSticky||0===t.widgets.length})).map((function(t){return t.stop_widgets})).reduce((function(t,e){return t.concat(e)}),[])},t.new=function(e){var i,n,o,s=Array.from(new Set(BaseWidget.queryAllWidgetsContainers(FixedWidgetClassName).concat(queryElements(compatabilty_FW_v5(e.widgets))))),r=compatabilty_FW_v5((void 0===(i=e.stop_elements_selectors||e.stop_id)&&(i=""),i.replace(/[\r\n]|[\r]/gi,"\n").split("\n").map((function(t){return t.trim()})).filter((function(t){return""!==t})))),a=Array.from(new Set(BaseWidget.queryAllWidgetsContainers(StopWidgetClassName).concat(queryElements(r)))),l=(n=s,[(o=a).filter((function(t){return!n.includes(t)})),n.filter((function(t){return o.includes(t)}))]),c=l[0];return l[1].forEach((function(t){console.error("The Widget is detected as fixed block and stop block!\n".concat(t.innerHTML))})),s.forEach((function(t){t.classList.add(FixedWidgetClassName)})),c.forEach((function(t){t.classList.add(StopWidgetClassName)})),new t(s.concat(c).filter((function(t){var e=t.innerHTML.includes(FixedWidgetClassName)||t.innerHTML.includes(StopWidgetClassName);return e&&console.warn("Fixed Widget: Detected nested widget in ",t),!e})),e)},t}(),Plugin=function t(e,i){void 0===e&&(e=[]),t.version=i,t.sidebars?t.sidebars.render():(t.sidebars=Sidebars.new(e.reduce((function(t,e){return __assign(__assign(__assign({},t),e),{stop_elements_selectors:"".concat(t.stop_elements_selectors,"\n").concat(e.stop_elements_selectors),widgets:(t.widgets||[]).concat(e.widgets||[])})}))),document.addEventListener("scroll",t.sidebars.render),window.addEventListener("resize",(function(){t.sidebars.unmonut(),setTimeout((function(){t.sidebars.mount(),t.sidebars.render()}))})),t.sidebars.mount())};function onDocumentLoaded(){var t=document.querySelector("#wpadminbar"),e=(window.q2w3_sidebar_options||[{}]).map((function(e){return e.margin_top=(e.margin_top||0)+(t&&t.clientHeight||0),e}));e.some((function(t){return t.screen_max_width&&document.body.clientWidth<t.screen_max_width||t.screen_max_height&&document.body.clientHeight<t.screen_max_height}))||new Plugin(e,"6.0.7-20")}document.addEventListener("DOMContentLoaded",onDocumentLoaded),"complete"===document.readyState&&onDocumentLoaded();